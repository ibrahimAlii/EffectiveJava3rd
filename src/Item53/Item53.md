# Use varargs judiciously - استخدم قيم الوسائط المتعددة بحذر

نبدأ بمثال يوضح الفكرة العامة لدوال الوسائط المتعددة؛ فالمثال التالي يوضح يٌتوقع جمع القيم المدخلة إليه؛ فإذا كانت القيم المدخلة (1, 2, 3) فإن جمعهم يساوي 6 ولكن هذا ليس صحيحا في دالتنا:

```java
// Simple use of varargs
static int sum(int... args){
    int sum = 0;
    for (int arg : args)
        sum += arg;
    return sum;  // الناتج صفر
}
```
في بعض الأحيان نحتاج لكتابة دالة لاستقبال مدخلات متعددة من نوع ما؛ على سبيل المثال، تخيل أنك تريد حساب الحد الأدنى لعنصر من متسلسة كالتالي:

```java
// The WRONG way to use varargs to pass one or more arguments!
static int min(int... args){
    if (args.length == 0)
        throw new IllegalArgumentException("Too few arguments")
        
    int min = args[0];
    for (int i = 1; i < args.length; i++)
        if (args[i] < min)
            min = args[i];
    return min;    
}
```

هناك عدة مشكلات في هذا الحل:-
 - المشكلة الأكبر عندما يستدعي المستخدم هذه الدالة بدون إدخال أي مدخلات، فإن هذه البرنامج سيفشل في وقت التشغيل وليس في وقت البناء.
 - ينبغي أن تتفقد هذه الوسائط المتعددة بشكل صريح في كل مرة.
 
 
 لحسن الحظ هناك حل لهذه المشاكل، وهو  عن طريق إدخال أكثر من مٌدخل للاستفادة منه والتأكدة من عدم فراغية المتسلسلة:
 
 ```java
static int min(int firstArg, int... remainingArgs){ 
    int min = firstArg;
    for (int arg : remainingArgs)
        if (arg < min)
            min = arg;
    return min;    
}
```
في المثال الأخير؛ يمكننا استخدام قيم الوسائط المتعددة بكل أمان وسهولة.

وللإعتناء بالسرعة ومزيد عناية لهذه الأنواع من الدوال التي تحمل هذه النوعية من المدخلات؛ إذا كنت تعلم أن 95% من الحالات سيكون أقل من ثلاث مدخلات يمكنك التعامل معها بالطريقة التالية:

```java
public void foo(){}
public void foo(int a1){}
public void foo(int a1, int a2){}
public void foo(int a1, int a2, int a3){}
public void foo(int a1, int a2, int a3, int... rest){}
```
وبهذه الطريقة 5% فقط من المدخلات والتي تحمل أكثر من ثلاث أعداد سندفع ثمن الدالة الأخيرة واستدعاء الوسائط المتعددة.



### ملخص:
قيم الوسائط المتعددة عديمة القيمة.\
ضع في بداية مدخل الوسائط المتعددة أية مدخلات مطلوبة أخرى؛ وحاذر من مشاكل السرعة المتعلقة بالوسائط المتعددة.
 
 